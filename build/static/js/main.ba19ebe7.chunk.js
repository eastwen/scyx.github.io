(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,a){},14:function(e,t,a){},15:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(3),i=a.n(r);a(13),a(14);var o=function(){const[e,t]=Object(n.useState)("\u623f\u5b50"),[a,r]=Object(n.useState)([{name:"\u94c1\u77ff\u77f3",key:"iron",value:0,perSec:0},{name:"\u94dc\u77ff\u77f3",key:"copper",value:0,perSec:0},{name:"\u6728\u6750",key:"wood",value:0,perSec:0},{name:"\u77f3\u5934",key:"stone",value:0,perSec:0},{name:"\u9ec4\u91d1",key:"gold",value:0,perSec:0}]),[i,o]=Object(n.useState)(0),[c,d]=Object(n.useState)(1),[p,u]=Object(n.useState)(0),[s,m]=Object(n.useState)(!1),[g,y]=Object(n.useState)(0),[h,v]=Object(n.useState)(["\u6e38\u620f\u5f00\u59cb\u3002"]),[f,x]=Object(n.useState)([]),[b,k]=Object(n.useState)(0),[E,w]=Object(n.useState)({fur:0,meat:0,scale:0,tooth:0}),[S,R]=Object(n.useState)({temp:25,desc:"\u6674\u6717",tick:0}),[j,C]=Object(n.useState)(!1),I=l.a.useRef(null),M=l.a.useRef(null),O=[{name:"\u521d\u7ea7",maxLevel:3,exp:100},{name:"\u4e2d\u7ea7",maxLevel:6,exp:200},{name:"\u9ad8\u7ea7",maxLevel:99,exp:500}],$=e=>e<3?O[0]:e<6?O[1]:O[2],L=e=>$(e).exp,T=e=>v(t=>[e,...t.slice(0,49)]),W=()=>{if(j||s)return;m(!0),y(1);const e=c<=1?800:c<=3?1200+200*(c-1):c<=6?1800+300*(c-3):2700+100*(c-6),t=Date.now();I.current&&(clearInterval(I.current),I.current=null),M.current&&(clearTimeout(M.current),M.current=null),I.current=setInterval(()=>{const a=Date.now()-t,n=Math.max(0,1-a/e);y(n),a>=e&&(clearInterval(I.current),I.current=null,y(0))},16),M.current=setTimeout(()=>{var e;let t="wood";if(c>1){const e=[[{key:"wood",weight:100}],[{key:"wood",weight:40},{key:"stone",weight:25},{key:"iron",weight:20},{key:"copper",weight:10},{key:"gold",weight:5}],[{key:"gold",weight:20},{key:"iron",weight:30},{key:"copper",weight:25},{key:"stone",weight:15},{key:"wood",weight:10}]];let a=[];const n=(a=c>=20?e[2]:c>=10?e[1]:e[0]).reduce((e,t)=>e+t.weight,0);let l=Math.random()*n;for(let r=0;r<a.length;r++)if((l-=a[r].weight)<=0){t=a[r].key;break}}else t="wood";r(e=>e.map(e=>e.key===t?{...e,value:e.value+1}:e)),T(`\u91c7\u96c6\u83b7\u5f97\u4e86${(null===(e=a.find(e=>e.key===t))||void 0===e?void 0:e.name)||t}`),u(e=>{let t=e+10,a=c,n=L(a),l=!1;for(;t>=n;)t-=n,n=L(a+=1),l=!0;return l&&d(a),t}),m(!1),M.current=null},e)},B=()=>{j||(a[2].value>=10?(r(e=>e.map((e,t)=>2===t?{...e,value:e.value-10}:0===t?{...e,perSec:e.perSec+.1}:1===t?{...e,perSec:e.perSec+.1}:3===t?{...e,perSec:e.perSec+.1}:4===t?{...e,perSec:e.perSec+.05}:e)),o(e=>e+1),d(e=>e+1),T("\u62db\u52df\u4e00\u540d\u5de5\u4eba\u3002")):alert("\u62db\u52df\u5de5\u4eba\u9700\u898110\u6728\u6750\uff01"))},F=()=>{j||(a[2].value>=20&&a[3].value>=10?(r(e=>e.map((e,t)=>"wood"===e.key?{...e,value:e.value-20}:"stone"===e.key?{...e,value:e.value-10}:e)),x(e=>e.find(e=>"house"===e.type)?e.map(e=>"house"===e.type?{...e,count:e.count+1}:e):[...e,{type:"house",count:1}]),T("\u5efa\u9020\u4e86\u4e00\u95f4\u623f\u5b50\u3002")):alert("\u5efa\u9020\u623f\u5b50\u9700\u898120\u6728\u6750\u548c10\u77f3\u5934\uff01"))},z=()=>{if(j)return;const e=a.find(e=>"wood"===e.key);e&&e.value>=1?(r(e=>e.map(e=>"wood"===e.key?{...e,value:e.value-1}:e)),R(e=>({...e,temp:e.temp+3})),T("\u6d88\u80171\u6728\u6750\uff0c\u63d0\u5347\u4e86\u5ba4\u5185\u6e29\u5ea63\u2103\uff01")):alert("\u6728\u6750\u4e0d\u8db3\uff0c\u65e0\u6cd5\u63d0\u5347\u6e29\u5ea6\uff01")};Object(n.useEffect)(()=>{if(j)return;const e=setInterval(()=>{R(e=>{var t;let a=e.tick+1,n=e.temp,l=e.desc;if(a%10===0){const e=Math.random();e<.3?(n=Math.max(-20,n-Math.floor(8*Math.random()+3)),l="\u66b4\u98ce\u96ea"):e<.7?(n=Math.max(-10,n-Math.floor(4*Math.random()+1)),l="\u5bd2\u51b7"):(n=Math.min(25,n+Math.floor(6*Math.random())),l="\u6674\u6717"),T(`\u5929\u6c14\u53d8\u5316\uff1a${l}\uff0c\u6e29\u5ea6${n}\u2103`)}let r=(null===(t=f.find(e=>"house"===e.type))||void 0===t?void 0:t.count)||0;return n<=-10&&0===r&&(C(!0),T("\u4f60\u88ab\u51bb\u6b7b\u4e86\uff01\u6e38\u620f\u7ed3\u675f\u3002")),{temp:n,desc:l,tick:a}})},1e3);return()=>clearInterval(e)},[j,f]),Object(n.useEffect)(()=>{if(!j&&i>0){const e=setInterval(()=>{r(e=>{let t="wood";if(c>1){const e=[[{key:"wood",weight:80}],[{key:"wood",weight:80},{key:"stone",weight:25},{key:"iron",weight:20},{key:"copper",weight:10},{key:"gold",weight:5}],[{key:"gold",weight:20},{key:"iron",weight:30},{key:"copper",weight:25},{key:"stone",weight:15},{key:"wood",weight:80}]];let a=[];const n=(a=c>=20?e[2]:c>=10?e[1]:e[0]).reduce((e,t)=>e+t.weight,0);let l=Math.random()*n;for(let r=0;r<a.length;r++)if((l-=a[r].weight)<=0){t=a[r].key;break}}else t="wood";const a=e.map(e=>e.key===t?{...e,value:+(e.value+(e.perSec>0?e.perSec:1)).toFixed(2)}:e);if(a.some((t,n)=>a[n].value>e[n].value)){const e=a.find(e=>e.key===t);if(e){const a=+((e.perSec>0?e.perSec:1)*i).toFixed(2);T(`\u5de5\u4eba\u81ea\u52a8\u91c7\u96c6\u83b7\u5f97\u4e86 ${a} ${e.name||t}\u3002`)}u(e=>{let t=e+5*i,a=c,n=L(a),l=!1;for(;t>=n;)t-=n,n=L(a+=1),l=!0;return l&&d(a),t})}return a})},3e3);return()=>clearInterval(e)}},[i,c,j,T,a]),Object(n.useEffect)(()=>(j&&(I.current&&(clearInterval(I.current),I.current=null),M.current&&(clearTimeout(M.current),M.current=null),m(!1),y(0)),()=>{I.current&&clearInterval(I.current),M.current&&clearTimeout(M.current)}),[j]);const A=e=>{if(j)return;const t=a.find(e=>"wood"===e.key),n=a.find(e=>"stone"===e.key),l=a.find(e=>"iron"===e.key);"trap"===e?t&&t.value>=10&&n&&n.value>=5?(r(e=>e.map(e=>"wood"===e.key?{...e,value:e.value-10}:"stone"===e.key?{...e,value:e.value-5}:e)),x(e=>e.find(e=>"trap"===e.type)?e.map(e=>"trap"===e.type?{...e,level:(e.level||1)+1}:e):[...e,{type:"trap",level:1}]),T("\u5efa\u9020/\u5347\u7ea7\u4e86\u9677\u9631\u3002")):alert("\u5efa\u9020/\u5347\u7ea7\u9677\u9631\u9700\u898110\u6728\u6750\u548c5\u77f3\u5934\uff01"):"expansion"===e?t&&t.value>=30&&n&&n.value>=20?(r(e=>e.map(e=>"wood"===e.key?{...e,value:e.value-30}:"stone"===e.key?{...e,value:e.value-20}:e)),x(e=>e.find(e=>"expansion"===e.type)?e.map(e=>"expansion"===e.type?{...e,level:(e.level||1)+1}:e):[...e,{type:"expansion",level:1}]),k(e=>e+2),T("\u6269\u5efa\u6210\u529f\uff0c\u4eba\u53e3\u4e0a\u9650\u63d0\u5347\u3002")):alert("\u6269\u5efa\u9700\u898130\u6728\u6750\u548c20\u77f3\u5934\uff01"):"hunter"===e&&(t&&t.value>=20&&l&&l.value>=10?(r(e=>e.map(e=>"wood"===e.key?{...e,value:e.value-20}:"iron"===e.key?{...e,value:e.value-10}:e)),x(e=>e.find(e=>"hunter"===e.type)?e.map(e=>"hunter"===e.type?{...e,level:(e.level||1)+1}:e):[...e,{type:"hunter",level:1}]),T("\u5efa\u9020/\u5347\u7ea7\u4e86\u730e\u4eba\u5c0f\u5c4b\u3002")):alert("\u5efa\u9020/\u5347\u7ea7\u730e\u4eba\u5c0f\u5c4b\u9700\u898120\u6728\u6750\u548c10\u94c1\u77ff\u77f3\uff01"))},D=e=>{if("trap"===e){const e=f.find(e=>"trap"===e.type);if(!e)return void alert("\u8bf7\u5148\u5efa\u9020\u9677\u9631\uff01");const t=e.level||1;Math.random()<.5+.1*(t-1)?(w(e=>({...e,fur:e.fur+1,meat:e.meat+1})),T("\u9677\u9631\u6355\u83b7\u5230\u4e00\u53ea\u5c0f\u52a8\u7269\uff0c\u83b7\u5f97\u6bdb\u76ae\u548c\u9c9c\u8089\uff01")):T("\u9677\u9631\u672a\u80fd\u6355\u83b7\u5230\u730e\u7269\u3002")}else if("hunter"===e){const e=f.find(e=>"hunter"===e.type);if(!e)return void alert("\u8bf7\u5148\u5efa\u9020\u730e\u4eba\u5c0f\u5c4b\uff01");const t=e.level||1;Math.random()<.4+.12*(t-1)?(w(e=>({...e,scale:e.scale+1,tooth:e.tooth+1})),T("\u730e\u4eba\u5c0f\u5c4b\u72e9\u730e\u6210\u529f\uff0c\u83b7\u5f97\u9cde\u7247\u548c\u517d\u9f7f\uff01")):T("\u730e\u4eba\u5c0f\u5c4b\u72e9\u730e\u5931\u8d25\u3002")}};return l.a.createElement("div",{className:"App",style:{padding:24,fontFamily:"sans-serif"}},l.a.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"flex-start",justifyContent:"flex-start"}},l.a.createElement("div",{style:{width:220,minHeight:400,marginRight:32,background:"#f7f7f7",border:"1px solid #ccc",borderRadius:6,padding:12,textAlign:"left",fontSize:14,color:"#333",overflowY:"auto",height:480}},l.a.createElement("div",{style:{fontWeight:"bold",marginBottom:8}},"\u65e5\u5fd7\u8bb0\u5f55"),l.a.createElement("ul",{style:{padding:0,margin:0,listStyle:"none"}},h.map((e,t)=>l.a.createElement("li",{key:t,style:{opacity:t>20?.5:1}},e)))),l.a.createElement("div",{style:{display:"flex",flexDirection:"row",width:"100%",maxWidth:1e3,justifyContent:"space-between",alignItems:"flex-start"}},l.a.createElement("div",{style:{flex:1,minWidth:0,marginRight:32,textAlign:"left"}},l.a.createElement("div",{style:{display:"flex",alignItems:"center",marginBottom:16}},l.a.createElement("h1",{style:{marginRight:20,display:"flex",alignItems:"center",justifyContent:"center"}},"\u6253\u9020\u672b\u65e5\u5b89\u5168\u5c4b"),l.a.createElement("div",{style:{display:"flex",alignItems:"center"}},["\u623f\u5b50","\u5efa\u7b51","\u63a2\u9669"].map(a=>{const n="\u63a2\u9669"===a,r="\u5efa\u7b51"===a,i=n&&c<30||r&&c<10;return l.a.createElement("button",{key:a,onClick:()=>{i||t(a)},disabled:i,style:{marginRight:12,padding:"8px 16px",borderRadius:e===a?"4px 4px 4px 4px":"4px",backgroundColor:e===a?"#2196f3":"#f5f5f5",color:e===a?"#fff":i?"#aaa":"#333",fontWeight:e===a?"bold":"normal",border:e===a?"2px solid #2196f3":"1px solid #ccc",borderBottom:e===a?"none":"1px solid #ccc",boxShadow:e===a?"0 -2px 5px rgba(0,0,0,0.1)":"none",position:"relative",top:e===a?"1px":"0",minWidth:80},title:i?n?"\u8fbe\u523030\u7ea7\u540e\u89e3\u9501\u63a2\u9669":r?"\u8fbe\u523010\u7ea7\u540e\u89e3\u9501\u5efa\u7b51":"":""},a,i&&l.a.createElement("span",{style:{fontSize:12,marginLeft:2}},"(\u672a\u89e3\u9501)"))}))),l.a.createElement("div",{style:{marginBottom:16}},l.a.createElement("span",{style:{fontSize:18,marginRight:16}},$(c).name,"\uff1a",c,"/",L(c),"\uff08\u7ecf\u9a8c\uff1a",p,"/",L(c),"\uff09"),l.a.createElement("span",{style:{fontSize:18}},"\u5de5\u4eba\uff1a",i)),(()=>{switch(e){case"\u623f\u5b50":return l.a.createElement("div",null,l.a.createElement("button",{onClick:W,disabled:s||g>0||j,style:{position:"relative",marginRight:12,padding:"8px 16px",overflow:"hidden",width:120}},j?"\u5df2\u6b7b\u4ea1":s||g>0?"\u91c7\u96c6\u4e2d...":"\u91c7\u96c6",(s||g>0)&&!j&&l.a.createElement("span",{style:{position:"absolute",left:0,bottom:0,height:4,width:`${100*(g>0?g:1)}%`,background:"#2196f3",transition:"width 0.1s linear",zIndex:1,borderRadius:2,pointerEvents:"none"}})),l.a.createElement("button",{onClick:B,disabled:j,style:{marginRight:12,padding:"8px 16px"}},"\u62db\u52df\u5de5\u4eba\uff0810\u6728\u6750\uff0c\u63d0\u5347\u7b49\u7ea7\uff09"),l.a.createElement("button",{onClick:z,disabled:j,style:{marginRight:12,padding:"8px 16px"}},"\u6dfb\u52a0\u6728\u6750\uff08-1\uff09"),l.a.createElement("div",{style:{marginTop:16,marginBottom:8,color:S.temp<=-10?"#c00":"#2196f3",fontWeight:"bold"}},"\u5929\u6c14\uff1a",S.desc,"\uff0c\u6e29\u5ea6\uff1a",S.temp,"\u2103"));case"\u5efa\u7b51":return c<10?l.a.createElement("div",null,l.a.createElement("p",{style:{color:"#c00"}},`\u5efa\u7b51\u529f\u80fd\u5c06\u572810\u7ea7\u540e\u89e3\u9501\uff0c\u5f53\u524d\u7b49\u7ea7\uff1a${c}`),l.a.createElement("button",{disabled:!0,style:{marginRight:12,padding:"8px 16px"}},"\u5efa\u9020\u623f\u5b50\uff08\u672a\u89e3\u9501\uff09")):l.a.createElement("div",null,l.a.createElement("button",{onClick:F,disabled:j,style:{marginRight:12,padding:"8px 16px"}},"\u7b49\u7ea710\u89e3\u9501\u5efa\u9020\u623f\u5b50\uff0c\u623f\u5b50\u53ef\u9632\u6b62\u6781\u5bd2\u5929\u6c14\u51bb\u6b7b\u3002"),l.a.createElement("button",{onClick:()=>A("trap"),disabled:j,style:{marginRight:12,padding:"8px 16px"}},"\u5efa\u9020/\u5347\u7ea7\u9677\u9631"),l.a.createElement("button",{onClick:()=>A("expansion"),disabled:j,style:{marginRight:12,padding:"8px 16px"}},"\u5efa\u9020/\u5347\u7ea7\u6269\u5efa"),l.a.createElement("button",{onClick:()=>A("hunter"),disabled:j,style:{marginRight:12,padding:"8px 16px"}},"\u5efa\u9020/\u5347\u7ea7\u730e\u4eba\u5c0f\u5c4b"),l.a.createElement("button",{onClick:()=>D("trap"),disabled:j,style:{marginRight:12,padding:"8px 16px"}},"\u89e6\u53d1\u9677\u9631\u6355\u83b7"),l.a.createElement("button",{onClick:()=>D("hunter"),disabled:j,style:{marginRight:12,padding:"8px 16px"}},"\u730e\u4eba\u5c0f\u5c4b\u72e9\u730e"),l.a.createElement("div",{style:{marginTop:16,marginBottom:8}},f.length>0?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{style:{fontWeight:"bold",marginBottom:4}},"\u5df2\u5efa\u9020\u7684\u5efa\u7b51\uff1a"),f.map(e=>l.a.createElement("div",{key:e.type},"house"===e.type?`\u623f\u5b50 x${e.count}`:"trap"===e.type?`\u9677\u9631 Lv.${e.level||1}`:"expansion"===e.type?`\u6269\u5efa Lv.${e.level||1}`:"hunter"===e.type?`\u730e\u4eba\u5c0f\u5c4b Lv.${e.level||1}`:e.type))):l.a.createElement("div",null,"\u6682\u65e0\u5efa\u7b51\uff0c\u8bf7\u5148\u5efa\u9020\u4e00\u4e9b\u5efa\u7b51\u3002")),l.a.createElement("div",{style:{marginTop:8}},l.a.createElement("span",null,"\u4eba\u53e3\uff1a",b),l.a.createElement("span",{style:{marginLeft:12}},"\u6bdb\u76ae\uff1a",E.fur," \u9c9c\u8089\uff1a",E.meat," \u9cde\u7247\uff1a",E.scale," \u517d\u9f7f\uff1a",E.tooth)));case"\u63a2\u9669":const t=30;return c<t?l.a.createElement("div",null,l.a.createElement("p",{style:{color:"#c00"}},`\u63a2\u9669\u529f\u80fd\u5c06\u5728${t}\u7ea7\u540e\u89e3\u9501\uff0c\u5f53\u524d\u7b49\u7ea7\uff1a${c}`),l.a.createElement("button",{disabled:!0,style:{marginRight:12,padding:"8px 16px"}},"\u5f00\u59cb\u63a2\u9669\uff08\u672a\u89e3\u9501\uff09")):l.a.createElement("div",null,l.a.createElement("p",null,"\u63a2\u9669\u529f\u80fd\u5c1a\u672a\u5f00\u653e\uff0c\u656c\u8bf7\u671f\u5f85\uff01"),l.a.createElement("button",{disabled:!0,style:{marginRight:12,padding:"8px 16px"}},"\u5f00\u59cb\u63a2\u9669\uff08\u5373\u5c06\u63a8\u51fa\uff09"));default:return l.a.createElement("div",null,"\u672a\u77e5\u6807\u7b7e\u9875")}})()),l.a.createElement("div",{style:{minWidth:220,marginLeft:0,border:"1px solid #aaa",borderRadius:6,padding:12,background:"#fff",width:220}},l.a.createElement("div",{style:{fontWeight:"bold",marginBottom:4,textAlign:"center"}},"\u5e93\u5b58"),l.a.createElement("table",{style:{borderCollapse:"collapse",fontSize:16,width:"100%"}},l.a.createElement("tbody",null,a.filter(e=>e.value>0).map((e,t)=>l.a.createElement("tr",{key:e.key},l.a.createElement("td",{style:{padding:"2px 8px",textAlign:"right",color:0===t?"#333":"#666"}},e.name),l.a.createElement("td",{style:{padding:"2px 8px",textAlign:"right",fontWeight:0===t?"bold":"normal"}},Math.floor(e.value),e.perSec>0&&l.a.createElement("span",{style:{color:"green",fontSize:14,marginLeft:2}},"(+",e.perSec,")"))))))))),l.a.createElement("div",{style:{marginTop:40,color:"#888",paddingTop:20,textAlign:"center",maxWidth:800,margin:"0 auto"}},l.a.createElement("p",null,"\u6bcf\u4e2a\u5de5\u4eba\u6bcf\u79d2\u81ea\u52a8\u91c7\u96c6\u6240\u6709\u6709\u589e\u957f\u901f\u7387\u7684\u8d44\u6e90\u3002"),l.a.createElement("p",null,"\u62db\u52df\u5de5\u4eba\u6d88\u801710\u6728\u6750\u5e76\u63d0\u5347\u7b49\u7ea7\uff0c\u7b49\u7ea7\u8d8a\u9ad8\u91c7\u96c6\u51b7\u5374\u8d8a\u77ed\uff08\u6700\u4f4e0.5\u79d2\uff09\u3002"),l.a.createElement("p",null,"\u7b49\u7ea710\u89e3\u9501\u5efa\u9020\u623f\u5b50\uff0c\u623f\u5b50\u53ef\u9632\u6b62\u6781\u5bd2\u5929\u6c14\u51bb\u6b7b\u3002"),l.a.createElement("p",null,"\u5929\u6c14\u7cfb\u7edf\uff1a\u6e29\u5ea6\u8fc7\u4f4e\u4e14\u65e0\u623f\u5b50\u65f6\u4f1a\u5bfc\u81f4\u89d2\u8272\u6b7b\u4ea1\u3002")))};var c=e=>{e&&e instanceof Function&&a.e(3).then(a.bind(null,16)).then(t=>{let{getCLS:a,getFID:n,getFCP:l,getLCP:r,getTTFB:i}=t;a(e),n(e),l(e),r(e),i(e)})};i.a.createRoot(document.getElementById("root")).render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(o,null))),c()},4:function(e,t,a){e.exports=a(15)}},[[4,1,2]]]);
//# sourceMappingURL=main.ba19ebe7.chunk.js.map